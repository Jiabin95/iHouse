"use strict";function UtilFactory(a,b,c){var d=function(a,b,d){var e=!1;if(a&&a.length){var f=c.getComputedStyle(a[0]);e=angular.isDefined(f[b])&&(d?f[b]===d:!0)}return e},e={dom:{},now:c.performance?angular.bind(c.performance,c.performance.now):Date.now||function(){return(new Date).getTime()},nextUid:function(){return""+nextUniqueId++},getClosest:function(a,b,c){if(angular.isString(b)){var d=b.toUpperCase();b=function(a){return a.nodeName===d}}if(a instanceof angular.element&&(a=a[0]),c&&(a=a.parentNode),!a)return null;do if(b(a))return a;while(a=a.parentNode);return null},nextTick:function(c,d,f){function g(){var a=h.queue,c=h.digest;h.queue=[],h.timeout=null,h.digest=!1,a.forEach(function(a){var b=a.scope&&a.scope.$$destroyed;b||a.callback()}),c&&b.$digest()}var h=e.nextTick,i=h.timeout,j=h.queue||[];return j.push({scope:f,callback:c}),null===d&&(d=!0),h.digest=h.digest||d,h.queue=j,i||(h.timeout=a(g,0,!1))},hasComputedStyle:d,isParentFormSubmitted:function(a){var b=e.getClosest(a,"form"),c=b?angular.element(b).controller("form"):null;return c?c.$submitted:!1}};return e}function mdInputContainerDirective(a){function b(b,c,d,e){var f=this;f.isErrorGetter=d.mdIsError&&a(d.mdIsError),f.delegateClick=function(){f.input.focus()},f.element=c,f.setFocused=function(a){c.toggleClass("md-input-focused",!!a)},f.setHasValue=function(a){c.toggleClass("md-input-has-value",!!a)},f.setHasPlaceholder=function(a){c.toggleClass("md-input-has-placeholder",!!a)},f.setInvalid=function(a){a?e.addClass(c,"md-input-invalid"):e.removeClass(c,"md-input-invalid")},b.$watch(function(){return f.label&&f.input},function(a){a&&!f.label.attr("for")&&f.label.attr("for",f.input.attr("id"))})}return b.$inject=["$scope","$element","$attrs","$animate"],{restrict:"E",controller:b}}function labelDirective(){return{restrict:"E",require:"^?mdInputContainer",link:function(a,b,c,d){d&&(d.label=b,a.$on("$destroy",function(){d.label=null}))}}}function inputTextareaDirective(a){return{restrict:"E",require:["^?mdInputContainer","?ngModel"],link:function(b,c,d,e){function f(){i.setHasValue(c.val().length>0||(c[0].validity||{}).badInput)}function g(a){return i.setHasValue(!k.$isEmpty(a)),a}function h(){i.label&&d.$observe("required",function(){i.label.toggleClass("md-required",!1)})}var i=e[0],j=!!e[1],k=e[1],l=angular.isDefined(d.readonly);if(i){i.input=c,h(),c.addClass("md-input"),c.attr("id")||c.attr("id","input_"+a.nextUid()),j||f();var m=i.isErrorGetter||function(){return k.$invalid&&(k.$touched||a.isParentFormSubmitted(c))};b.$watch(m,i.setInvalid),d.ngValue&&d.$observe("value",f),k.$parsers.push(g),k.$formatters.push(g),c.on("input",f),l||c.on("focus",function(){a.nextTick(function(){i.setFocused(!0)})}).on("blur",function(){a.nextTick(function(){i.setFocused(!1),f()})}),b.$on("$destroy",function(){i.setFocused(!1),i.setHasValue(!1),i.input=null})}}}}function placeholderDirective(){return{restrict:"A",require:"^^?mdInputContainer",priority:200,link:{pre:function(a,b,c,d){d&&d.setHasPlaceholder(!0)}}}}UtilFactory.$inject=["$timeout","$rootScope","$window"],mdInputContainerDirective.$inject=["$parse"],inputTextareaDirective.$inject=["$mdUtil"],angular.module("loginAppInternal",["loginTranslations","loginPreload","wixAngular","wix.common.bi","loginAppConstants","wixStyle","material"]).config(["wixBiLoggerProvider","biEvents",function(a,b){function c(a){return a.isMobile()?"mobile":"desktop"}function d(a){return a.get()}c.$inject=["userDeviceType"],d.$inject=["sessionId"],a.setConfig({adapter:"hls2",eventMap:b.getEventMap(),defaultEventArgs:{view:c,ldSessionID:d,appVersion:"new-wix-login"},removeUndefinedValues:!0})}]),angular.module("loginApp",["loginAppInternal","ngAnimate","ngCookies","debounce"]).config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]).run(["$window","$rootScope","debounce",function(a,b,c){a.addEventListener("resize",function(){return c(b.$digest(),500)})}]),angular.module("loginAppConstants",[]),angular.module("material",[]);try{angular.module("loginPreload")}catch(e){angular.module("loginPreload",[])}angular.module("loginPreload").run(["$templateCache",function(a){a.put("views/desktop/account-verification.html","<form name='accountVerificationForm' novalidate onsubmit='submit.focus()'>\n  <div class='title-and-content'>\n    <div class='account-verification-title title'>{{'account_verification.title' | translate}}</div>\n    <div class='account-verification-content content'>{{'account_verification.content' | translate:{email: $ctrl.getEmail()} }}</div>\n  </div>\n  <div class='input-info'>\n    <desktop-input class='password' field='accountVerificationForm.password' label=\"'account_verification.placeholder'\" server-error='$ctrl.serverError' show-error-on-general-error='true'>\n      <input autofocus name='password' ng-model='$ctrl.password' required type='password'>\n    </desktop-input>\n    <div class='button-and-forgot-password'>\n      <div class='button-spinner'>\n        <button class='verify-btn wix-button submit' name='submit' ng-click='accountVerificationForm.$valid ? $ctrl.verifyAccount() : $ctrl.onSubmitInvalid()' ng-show='!$ctrl.loading' type='submit'>{{'account_verification.next' | translate}}</button>\n        <div class='spinner-container' ng-show='$ctrl.loading'>\n          <spinner></spinner>\n        </div>\n      </div>\n      <a class='forgot-password-link' href ng-click='$ctrl.onClickForgotPassword()'>{{ 'forgot_password.link' | translate }}</a>\n    </div>\n  </div>\n</form>\n")}]);try{angular.module("loginPreload")}catch(e){angular.module("loginPreload",[])}angular.module("loginPreload").run(["$templateCache",function(a){a.put("views/desktop/enter-email.html","<form name='enterEmailForm' novalidate onsubmit='submit.focus()'>\n  <div class='enter-email-title title'>{{'enter_email.title' | translate}}</div>\n  <desktop-input class='email' field='enterEmailForm.email' label=\"'enter_email.placeholder'\" server-error='$ctrl.serverError' show-error-on-general-error='true'>\n    <input autofocus class='enter-email-input' name='email' ng-model='$ctrl.email' required type='email' wix-mail-validator>\n  </desktop-input>\n  <div class='button-spinner'>\n    <button class='enter-email-send wix-button submit' name='submit' ng-click='enterEmailForm.$valid ? $ctrl.sendEmailAddress() : $ctrl.onSubmitInvalid()' ng-show='!$ctrl.loading' type='submit'>{{'enter_email.send' | translate}}</button>\n    <div class='spinner-container' ng-show='$ctrl.loading'>\n      <spinner></spinner>\n    </div>\n  </div>\n</form>\n")}]);try{angular.module("loginPreload")}catch(e){angular.module("loginPreload",[])}angular.module("loginPreload").run(["$templateCache",function(a){a.put("views/desktop/forgot-password.html","<form class='forgot-password' name='forgotPasswordForm' novalidate onsubmit='submit.focus()'>\n  <div class='title-and-instructions'>\n    <div class='title'>{{'forgot_password.title' | translate}}</div>\n    <div class='forgot-password-instructions content'>{{'forgot_password.instructions' | translate}}</div>\n    <desktop-input class='email' field='forgotPasswordForm.email' label=\"'forgot_password.placeholder'\" server-error='$ctrl.serverError' show-error-on-general-error='true'>\n      <input autofocus name='email' ng-model='$ctrl.email' required type='email' wix-mail-validator>\n    </desktop-input>\n  </div>\n  <div class='back-next-buttons'>\n    <button class='back-btn wix-button is-button-outline' ng-click='$ctrl.onClickBack()' type='button'>{{'forgot_password.back' | translate}}</button>\n    <div class='button-spinner'>\n      <button class='send-btn wix-button' name='submit' ng-click='forgotPasswordForm.$valid ? $ctrl.onClickSend() : $ctrl.onSubmitInvalid()' ng-show='!$ctrl.loading' type='submit'>{{'forgot_password.send' | translate}}</button>\n      <div class='spinner-container' ng-show='$ctrl.loading'>\n        <spinner></spinner>\n      </div>\n    </div>\n  </div>\n</form>\n")}]);try{angular.module("loginPreload")}catch(e){angular.module("loginPreload",[])}angular.module("loginPreload").run(["$templateCache",function(a){a.put("views/desktop/login.html","<form class='login' name='loginForm' novalidate onsubmit='submit.focus()'>\n  <div class='log-in-title title'>{{'login.title' | translate}}</div>\n  <div class='new-user'>\n    {{ 'login.new_to_wix' | translate }}\n    <a class='signup-link' href ng-click='$ctrl.onClickSignup()'>{{ 'login.sign_up' | translate }}</a>\n  </div>\n  <div class='signin-section'>\n    <div class='signin-with-email'>\n      <desktop-input class='email' field='loginForm.email' label=\"'login.email'\" server-error='$ctrl.serverError' show-error-on-general-error='true'>\n        <input autofocus default-email name='email' ng-attr-wix-mail-validator='{{!$ctrl.novalidateEmail()}}' ng-model='$ctrl.email' required type=\"{{$ctrl.novalidateEmail() ? 'text' : 'email'}}\">\n      </desktop-input>\n      <desktop-input class='password' field='loginForm.password' label=\"'login.password'\" server-error='$ctrl.serverError'>\n        <input name='password' ng-minlength='4' ng-model='$ctrl.password' required type='password'>\n      </desktop-input>\n      <div class='remember-me-and-forgot-password'>\n        <label class='remember-me-section'>\n          <div class='remember-me-text'>{{'login.remember_me' | translate}}</div>\n          <wix-checkbox class='remember-me' ng-model='$ctrl.rememberMe'></wix-checkbox>\n        </label>\n        <a class='forgot-password-link' href ng-click='$ctrl.onClickForgotPassword()'>{{ 'forgot_password.link' | translate }}</a>\n      </div>\n      <div class='recaptcha-widget' id='recaptcha-widget' ng-class=\"{'recaptcha-v2': $ctrl.isNewRecaptcha()}\"></div>\n      <div class='login-button'>\n        <div class='button-spinner'>\n          <button class='login-btn wix-button' name='submit' ng-class=\"{'is-button-outline' : loginForm.$pristine}\" ng-click='loginForm.$valid ? $ctrl.doLogin() : $ctrl.onSubmitInvalid()' ng-show='!$ctrl.loading' type='submit'>{{'login.login_button' | translate}}</button>\n          <div class='spinner-container' ng-show='$ctrl.loading'>\n            <spinner></spinner>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class='divider'></div>\n    <social-signin></social-signin>\n  </div>\n</form>\n")}]);try{angular.module("loginPreload")}catch(e){angular.module("loginPreload",[])}angular.module("loginPreload").run(["$templateCache",function(a){a.put("views/desktop/signup.html","<form class='signup' name='signupForm' novalidate onsubmit='submit.focus()'>\n  <div class='sign-up-title title'>{{'signup.title' | translate}}</div>\n  <div class='already-user'>\n    {{ 'signup.already_have' | translate }}\n    <a class='login-link' href ng-click='$ctrl.onClickLogin()'>{{ 'signup.log_in' | translate }}</a>\n  </div>\n  <div class='signin-section'>\n    <div class='signin-with-email'>\n      <desktop-input class='email' field='signupForm.email' label=\"'signup.email'\" server-error='$ctrl.serverError' show-error-on-general-error='true'>\n        <input autofocus default-email name='email' ng-model='$ctrl.email' required type='email' wix-mail-validator>\n      </desktop-input>\n      <desktop-input class='email-confirm' field='signupForm.emailConfirm' label=\"'signup.confirm_email'\" server-error='$ctrl.serverError'>\n        <input match='$ctrl.email' name='emailConfirm' ng-model='$ctrl.emailConfirm' required type='email' wix-mail-validator>\n      </desktop-input>\n      <desktop-input class='password' field='signupForm.password' label=\"'signup.password'\" server-error='$ctrl.serverError'>\n        <input autocomplete='new-password' name='password' ng-minlength='4' ng-model='$ctrl.password' required type='password'>\n      </desktop-input>\n      <desktop-input class='password-confirm' field='signupForm.passwordConfirm' label=\"'signup.confirm_password'\" server-error='$ctrl.serverError'>\n        <input match='$ctrl.password' name='passwordConfirm' ng-model='$ctrl.passwordConfirm' required type='password'>\n      </desktop-input>\n      <div class='recaptcha-widget' id='recaptcha-widget' ng-class=\"{'recaptcha-v2': $ctrl.isNewRecaptcha()}\"></div>\n      <div class='login-button'>\n        <div class='button-spinner'>\n          <button class='signup-btn wix-button' name='submit' ng-class=\"{'is-button-outline' : signupForm.$pristine}\" ng-click='signupForm.$valid ? $ctrl.doSignup() : $ctrl.onSubmitInvalid()' ng-show='!$ctrl.loading' type='submit'>{{'signup.signup_button' | translate}}</button>\n          <div class='spinner-container' ng-show='$ctrl.loading'>\n            <spinner></spinner>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class='divider'></div>\n    <social-signin></social-signin>\n  </div>\n  <terms-of-use class='small'></terms-of-use>\n</form>\n")}]);try{angular.module("loginPreload")}catch(e){angular.module("loginPreload",[])}angular.module("loginPreload").run(["$templateCache",function(a){a.put("views/desktop/social-signin.html","<div class='signin-sozial-title' wix-experiment-if='!specs.users.SocialSigninTextDesktop'>{{ 'signin_social.text' | translate }}</div>\n<div class='sozial-button-and-spinner fazebook-container'>\n  <button class='signin-sozial-fazebook sozial-login fazebook' facebook-login fb-loading='$ctrl.fbLoading' ng-click=\"$ctrl.socialClicked('facebook')\" ng-show='!$ctrl.fbLoading' tabindex='0' type='button'>\n    <div class='icon-and-text'>\n      <div class='icon'>\n        <div class='login-svg-font-icons-fazebook'></div>\n      </div>\n      <div class='signin-button-text' wix-experiment-if='!specs.users.SocialSigninTextDesktop'>{{ 'signin_social.with_facebook' | translate }}</div>\n      <div class='signin-button-text' wix-experiment-if='specs.users.SocialSigninTextDesktop'>{{ 'signin_social.continue_with_facebook' | translate }}</div>\n    </div>\n  </button>\n  <div class='spinner-container' ng-show='$ctrl.fbLoading'>\n    <spinner></spinner>\n  </div>\n</div>\n<div class='sozial-button-and-spinner zoogle-container'>\n  <button class='signin-sozial-zoogle sozial-login zoogle' google-loading='$ctrl.googleLoading' google-login ng-click=\"$ctrl.socialClicked('google')\" ng-show='!$ctrl.googleLoading' tabindex='0' type='button'>\n    <div class='icon-and-text'>\n      <div class='icon'>\n        <div class='login-svg-font-icons-zoogle'></div>\n      </div>\n      <div class='signin-button-text' wix-experiment-if='!specs.users.SocialSigninTextDesktop'>{{ 'signin_social.with_google' | translate }}</div>\n      <div class='signin-button-text' wix-experiment-if='specs.users.SocialSigninTextDesktop'>{{ 'signin_social.continue_with_google' | translate }}</div>\n    </div>\n  </button>\n  <div class='spinner-container' ng-show='$ctrl.googleLoading'>\n    <spinner></spinner>\n  </div>\n</div>\n")}]);try{angular.module("loginPreload")}catch(e){angular.module("loginPreload",[])}angular.module("loginPreload").run(["$templateCache",function(a){a.put("views/mobile/account-verification.html","<form name='accountVerificationForm' novalidate onsubmit='submit.focus()'>\n  <div class='title-and-content'>\n    <div class='account-verification-title title'>{{'account_verification.title' | translate}}</div>\n    <div class='account-verification-content content'>{{'account_verification.content' | translate:{email: $ctrl.getEmail()} }}</div>\n  </div>\n  <div class='input-info'>\n    <mobile-input class='password' field='accountVerificationForm.password' label=\"'account_verification.placeholder'\" server-error='$ctrl.serverError' show-error-on-general-error='true'>\n      <input name='password' ng-model='$ctrl.password' required type='password'>\n    </mobile-input>\n    <div class='button-and-forgot-password'>\n      <button class='verify-btn wix-button submit' name='submit' ng-click='accountVerificationForm.$valid ? $ctrl.verifyAccount() : $ctrl.onSubmitInvalid()' ng-show='!$ctrl.loading' type='submit'>{{'account_verification.next' | translate}}</button>\n      <div class='spinner-container' ng-show='$ctrl.loading'>\n        <spinner></spinner>\n      </div>\n      <a class='forgot-password-link' href ng-click='$ctrl.onClickForgotPassword()'>{{ 'forgot_password.link' | translate }}</a>\n    </div>\n  </div>\n</form>\n")}]);try{angular.module("loginPreload")}catch(e){angular.module("loginPreload",[])}angular.module("loginPreload").run(["$templateCache",function(a){a.put("views/mobile/enter-email.html","<form name='enterEmailForm' novalidate onsubmit='submit.focus()'>\n  <div class='enter-email-title title'>{{'enter_email.title' | translate}}</div>\n  <mobile-input class='email' field='enterEmailForm.email' label=\"'enter_email.placeholder'\" server-error='$ctrl.serverError' show-error-on-general-error='true'>\n    <input class='enter-email-input' name='email' ng-model='$ctrl.email' required type='email' wix-mail-validator>\n  </mobile-input>\n  <div class='button-container'>\n    <button class='enter-email-send wix-button submit' name='submit' ng-click='enterEmailForm.$valid ? $ctrl.sendEmailAddress() : $ctrl.onSubmitInvalid()' ng-show='!$ctrl.loading' type='submit'>{{'enter_email.send' | translate}}</button>\n    <div class='spinner-container' ng-show='$ctrl.loading'>\n      <spinner></spinner>\n    </div>\n  </div>\n</form>\n")}]);try{angular.module("loginPreload")}catch(e){angular.module("loginPreload",[])}angular.module("loginPreload").run(["$templateCache",function(a){a.put("views/mobile/forgot-password.html","<form class='forgot-password' name='forgotPasswordForm' novalidate onsubmit='submit.focus()'>\n  <div class='title-and-instructions'>\n    <div class='title'>{{'forgot_password.title' | translate}}</div>\n    <div class='forgot-password-instructions content'>{{'forgot_password.instructions' | translate}}</div>\n    <mobile-input class='email' field='forgotPasswordForm.email' label=\"'forgot_password.placeholder'\" server-error='$ctrl.serverError' show-error-on-general-error='true'>\n      <input name='email' ng-model='$ctrl.email' required type='email' wix-mail-validator>\n    </mobile-input>\n  </div>\n  <div class='back-next-buttons'>\n    <button class='back-btn wix-button is-button-outline' ng-click='$ctrl.onClickBack()' type='button'>{{'forgot_password.back' | translate}}</button>\n    <button class='send-btn wix-button' name='submit' ng-click='forgotPasswordForm.$valid ? $ctrl.onClickSend() :  $ctrl.onSubmitInvalid()' ng-show='!$ctrl.loading' type='submit'>{{'forgot_password.send' | translate}}</button>\n    <div class='spinner-container' ng-show='$ctrl.loading'>\n      <spinner></spinner>\n    </div>\n  </div>\n</form>\n")}]);try{angular.module("loginPreload")}catch(e){angular.module("loginPreload",[])}angular.module("loginPreload").run(["$templateCache",function(a){a.put("views/mobile/login.html","<form class='login' name='loginForm' ng-class=\"{'is-email-focus': $ctrl.isEmailFocus}\" novalidate onsubmit='submit.focus()'>\n  <div class='form-header'>\n    <div class='log-in-title title'>{{'login.title' | translate}}</div>\n    <div class='new-user'>\n      {{ 'login.new_to_wix' | translate }}\n      <a class='signup-link' href ng-click='$ctrl.onClickSignup()'>{{ 'login.sign_up' | translate }}</a>\n    </div>\n  </div>\n  <div class='form-content'>\n    <div class='email-no-focus'>\n      <social-signin></social-signin>\n      <div class='or-use-email'>\n        <div class='separator'></div>\n        <div class='text'>{{'login.use_email'|translate}}</div>\n        <div class='separator'></div>\n      </div>\n    </div>\n    <div class='email-section' ng-click='$ctrl.isEmailFocus=true'>\n      <div class='show-above-email' ng-hide='$ctrl.isEmailFocus'></div>\n      <mobile-input class='email' field='loginForm.email' label=\"'login.email'\" ng-class=\"{'showing-fields' :  $ctrl.isEmailFocus}\" server-error='$ctrl.serverError' show-error-on-general-error='true'>\n        <input class='email' default-email name='email' ng-attr-wix-mail-validator='{{!$ctrl.novalidateEmail()}}' ng-model='$ctrl.email' required type=\"{{$ctrl.novalidateEmail() ? 'text' : 'email'}}\">\n      </mobile-input>\n    </div>\n    <div class='email-focus' ng-show='$ctrl.isEmailFocus'>\n      <mobile-input class='password' field='loginForm.password' label=\"'login.password'\" server-error='$ctrl.serverError'>\n        <input class='password' name='password' ng-minlength='4' ng-model='$ctrl.password' required type='password'>\n      </mobile-input>\n      <div class='recaptcha-widget' id='recaptcha-widget' ng-class=\"{'recaptcha-v2': $ctrl.isNewRecaptcha()}\"></div>\n      <button class='login-btn wix-button' name='submit' ng-click='loginForm.$valid ? $ctrl.doLogin() : $ctrl.onSubmitInvalid()' ng-show='!$ctrl.loading' type='submit'>{{'login.login_button' | translate}}</button>\n      <div class='spinner-container' ng-show='$ctrl.loading'>\n        <spinner></spinner>\n      </div>\n      <a class='forgot-password-link' href ng-click='$ctrl.onClickForgotPassword()'>{{ 'forgot_password.link' | translate }}</a>\n    </div>\n  </div>\n</form>\n")}]);try{angular.module("loginPreload")}catch(e){angular.module("loginPreload",[])}angular.module("loginPreload").run(["$templateCache",function(a){a.put("views/mobile/signup.html","<form class='signup' name='signupForm' ng-class=\"{'is-email-focus': $ctrl.isEmailFocus}\" novalidate onsubmit='submit.focus()'>\n  <div class='form-header'>\n    <div class='sign-up-title title'>{{'signup.title' | translate}}</div>\n    <div class='already-user'>\n      {{ 'signup.already_have' | translate }}\n      <a class='login-link' href ng-click='$ctrl.onClickLogin()'>{{ 'signup.log_in' | translate }}</a>\n    </div>\n  </div>\n  <div class='form-content'>\n    <div class='email-no-focus'>\n      <social-signin></social-signin>\n      <div class='or-use-email'>\n        <div class='separator'></div>\n        <div class='text'>{{'login.use_email'|translate}}</div>\n        <div class='separator'></div>\n      </div>\n    </div>\n    <div class='email-section' ng-click='$ctrl.isEmailFocus=true'>\n      <div class='show-above-email' ng-hide='$ctrl.isEmailFocus'></div>\n      <mobile-input class='email' field='signupForm.email' label=\"'signup.email'\" ng-class=\"{'showing-fields' :  $ctrl.isEmailFocus}\" server-error='$ctrl.serverError' show-error-on-general-error='true'>\n        <input default-email name='email' ng-model='$ctrl.email' required type='email' wix-mail-validator>\n      </mobile-input>\n    </div>\n    <div class='email-focus' ng-show='$ctrl.isEmailFocus'>\n      <mobile-input class='email-confirm' field='signupForm.emailConfirm' label=\"'signup.confirm_email'\" server-error='$ctrl.serverError'>\n        <input match='$ctrl.email' name='emailConfirm' ng-model='$ctrl.emailConfirm' required type='email' wix-mail-validator>\n      </mobile-input>\n      <mobile-input class='password' field='signupForm.password' label=\"'signup.mobile_choose_password'\" server-error='$ctrl.serverError'>\n        <input autocomplete='new-password' name='password' ng-minlength='4' ng-model='$ctrl.password' required type='password'>\n      </mobile-input>\n      <div class='recaptcha-widget' id='recaptcha-widget' ng-class=\"{'recaptcha-v2': $ctrl.isNewRecaptcha()}\"></div>\n      <button class='signup-btn wix-button' name='submit' ng-click='signupForm.$valid ? $ctrl.doSignup() : $ctrl.onSubmitInvalid()' ng-show='!$ctrl.loading' type='submit'>{{'signup.signup_button' | translate}}</button>\n      <div class='spinner-container' ng-show='$ctrl.loading'>\n        <spinner></spinner>\n      </div>\n      <terms-of-use></terms-of-use>\n    </div>\n  </div>\n</form>\n")}]);try{angular.module("loginPreload")}catch(e){angular.module("loginPreload",[])}angular.module("loginPreload").run(["$templateCache",function(a){a.put("views/mobile/social-signin.html","<div class='sozial-buttons'>\n  <div class='sozial-login fazebook fazebook-login-button' facebook-login fb-loading='$ctrl.fbLoading' ng-click=\"$ctrl.socialClicked('facebook')\" ng-show='!$ctrl.fbLoading'>\n    <div class='no-experiment' wix-experiment-if='!specs.users.SocialSigninTextMobile'>\n      <div class='text' ng-if=\"$ctrl.context === 'login'\">{{'login.login_facebook' | translate}}</div>\n      <div class='text' ng-if=\"$ctrl.context === 'signup'\">{{'signup.signup_facebook' | translate}}</div>\n    </div>\n    <div class='text' wix-experiment-if='specs.users.SocialSigninTextMobile'>{{'signin_social.continue_with_facebook' | translate}}</div>\n  </div>\n  <div class='sozial-spinner-container' ng-show='$ctrl.fbLoading'>\n    <spinner></spinner>\n  </div>\n  <div class='sozial-login zoogle zoogle-login-button' google-loading='$ctrl.googleLoading' google-login ng-click=\"$ctrl.socialClicked('google')\" ng-show='!$ctrl.googleLoading'>\n    <div class='no-experiment' wix-experiment-if='!specs.users.SocialSigninTextMobile'>\n      <div class='text' ng-if=\"$ctrl.context === 'login'\">{{'login.login_google' | translate}}</div>\n      <div class='text' ng-if=\"$ctrl.context === 'signup'\">{{'signup.signup_google' | translate}}</div>\n    </div>\n    <div class='text' wix-experiment-if='specs.users.SocialSigninTextMobile'>{{'signin_social.continue_with_google' | translate}}</div>\n  </div>\n  <div class='sozial-spinner-container' ng-show='$ctrl.googleLoading'>\n    <spinner></spinner>\n  </div>\n</div>\n")}]);try{angular.module("loginPreload")}catch(e){angular.module("loginPreload",[])}angular.module("loginPreload").run(["$templateCache",function(a){a.put("views/mobile/thank-you.html","<div class='title'>{{'thank_you.title' | translate}}</div>\n<div class='sub-title'>{{'thank_you.subtitle' | translate}}</div>\n<div class='user-email'>{{ $ctrl.getUserEmail() }}</div>\n<div class='content'>{{'thank_you.content' | translate}}</div>\n")}]);try{angular.module("loginPreload")}catch(e){angular.module("loginPreload",[])}angular.module("loginPreload").run(["$templateCache",function(a){a.put("views/forgot-password-confirmation.html","<form class='forgot-password-confirmation'>\n  <div class='title'>{{'forgot_password_confirmation.title' | translate}}</div>\n  <div class='content'>{{'forgot_password_confirmation.content' | translate}}</div>\n  <div class='button'>\n    <button class='done-btn wix-button' ng-click='$ctrl.onClickDone()' type='submit'>{{'forgot_password_confirmation.done' | translate}}</button>\n  </div>\n</form>\n")}]);try{angular.module("loginPreload")}catch(e){angular.module("loginPreload",[])}angular.module("loginPreload").run(["$templateCache",function(a){a.put("views/login-dialog.html","<div class='container' ng-class=\"{'mobile': $ctrl.isMobile(), 'desktop': !$ctrl.isMobile(), 'tablet-ft': $ctrl.isTabletExperiment()}\">\n  <div class='header'>\n    <img class='wix-logo' relative-src='images/wix-logo.svg'>\n    <a class='x-close login-svg-font-icons-x' delay-href ng-href='{{$ctrl.getOriginUrl()}}' ng-show='$ctrl.shouldShowX()' wix-bi-args='{context: $ctrl.biEvents.getContext($ctrl.getContext())}' wix-bi='DIALOG_CLOSED'></a>\n  </div>\n  <login ng-if=\"$ctrl.getContext() === 'login'\"></login>\n  <signup ng-if=\"$ctrl.getContext() === 'signup'\"></signup>\n  <forgot-password ng-if=\"$ctrl.getContext() === 'forgot-password'\"></forgot-password>\n  <forgot-password-confirmation ng-if=\"$ctrl.getContext() === 'forgot-password-confirmation'\"></forgot-password-confirmation>\n  <account-verification ng-if=\"$ctrl.getContext() === 'account-verification'\"></account-verification>\n  <enter-email ng-if=\"$ctrl.getContext() === 'enter-email'\"></enter-email>\n  <thank-you ng-if=\"$ctrl.getContext() === 'thank-you'\"></thank-you>\n</div>\n")}]);try{angular.module("loginTranslations")}catch(e){angular.module("loginTranslations",["pascalprecht.translate"])}angular.module("loginTranslations").config(["$translateProvider",function(a){var b={social_login:{error:{invalid_password:"Double check your password and try again."}},password:{invalid_password_format:"Please enter a valid password."},terms_of_use:{privacy_policy:"Privacy Policy",terms_of_use:"Terms of Use",text:"* By signing up, you agree to our {{termsOfUse}}, {{privacyPolicy}} and to receive Wix emails, newsletters & updates."},account_verification:{need_help:"Need Help?",next:"Go",placeholder:"Enter your password",content:"Looks like {{email}} is the same email address as your Wix account.",title:"Haven’t We Met?"},enter_email:{send:"Send",placeholder:"Email",title:"Please Enter Your Email"},forgot_password:{error_no_such_email:"Sure that's your email?",placeholder:"e.g. youremail@gmail.com",instructions:"Enter your email address & we'll send you a link to reset your password.",title:"Forgot Password?",back:"Back",send:"Next",link:"Forgot Password?"},forgot_password_confirmation:{done:"Done",content:"Head over to your mailbox to get your reset link and create your brand new password.",title:"Sent! Check Your Email"},signup:{or_signup_with:"Or sign up with",passwords_dont_match:"Passwords don’t match.",emails_dont_match:"Emails don't match. Take another look.",log_in:"Log In",already_have:"Already have a Wix account?",mobile_choose_password:"Choose a password",confirm_password:"Type your password again",password:"Password",confirm_email:"Type your email again",email:"Email",password_too_short:"Your password must have at least 4 characters.",error:{email_exists:"That email’s already in our system."},signup_facebook:"Sign Up with Facebook",signup_google:"Sign Up with Google",signup_button:"Sign Up",title:"Sign Up"},thank_you:{ok_button:"Ok",content:"To start creating your website, please access the Wix website builder through your desktop.",subtitle:"We've sent an email to",title:"Thank You for Joining Wix!"},page:{title:"Log In | Wix"},login:{google:"Google",facebook:"Facebook",invalid_email:"Hmmm, that’s not a valid email address.",required_field:"This field is required.",or_login_with:"Or log in with",use_email:"Or use your email",sign_up:"Sign Up",new_to_wix:"New to Wix?",password:"Password",email:"Email",ok_button:"Ok",general_server_error:"Looks like that didn’t work. Try again.",error:{invalid_email_or_password:"Double check your email & password and try again"},need_help:"Need Help?",remember_me:"Remember Me",login_facebook:"Log In with Facebook",login_google:"Log In with Google",login_button:"Log In",title:"Log In"},signin_social:{continue_with_google:"Continue with Google",continue_with_facebook:"Continue with Facebook",with_google:"Sign in with Google",with_facebook:"Sign in with Facebook",text:"Or sign in using your social account"}};a.translations("en",b),a.translations(b),a.preferredLanguage&&a.preferredLanguage("en")}]).value("preferredLanguage","en");var nextUniqueId=0;angular.module("material").directive("mdInputContainer",mdInputContainerDirective).directive("label",labelDirective).directive("input",inputTextareaDirective).directive("placeholder",placeholderDirective).factory("$mdUtil",UtilFactory);var ContextManager=function(){function a(){}return a.prototype.getContext=function(){return this.context},a.prototype.setContext=function(a){this.previous=this.context,this.context=a},a.prototype.getPreviousContext=function(){return this.previous},a}();angular.module("loginAppInternal").service("contextManager",ContextManager);var Login=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){this.$element=a,this.userServerApi=b,this.socialLogin=c,this.redirectHandler=d,this.errorCodeExtractor=e,this.captcha=f,this.wixBiLogger=g,this.biEvents=h,this.contextManager=i,this.experimentManager=j,this.userDeviceType=k,this.locationParams=l,this.rememberMe=!0,this.loading=!1,this.captchaAdded=!1,this.isEmailFocus=!1,c.init("login")}return a.$inject=["$element","userServerApi","socialLogin","redirectHandler","errorCodeExtractor","captcha","wixBiLogger","biEvents","contextManager","experimentManager","userDeviceType","locationParams"],a.prototype.onClickSignup=function(){this.wixBiLogger.log(this.biEvents.ON_SWITCH_CONTEXT,{context:"sign-up"}),this.contextManager.setContext("signup");
},a.prototype.onClickForgotPassword=function(){this.wixBiLogger.log(this.biEvents.ON_SWITCH_CONTEXT,{context:"forgot-password"}),this.contextManager.setContext("forgot-password")},a.prototype.novalidateEmail=function(){return"true"===this.locationParams.novalidate},a.prototype.doLogin=function(){var a=this;this.loading=!0,this.wixBiLogger.log(this.biEvents.LOGIN_SUBMIT),this.userServerApi.login(this.email,this.password,this.rememberMe,this.captchaAdded?this.captcha.recaptchaParams():void 0).then(function(b){a.redirectHandler.postLogin(b.data.uaToken)})["catch"](function(b){var c=a.errorCodeExtractor.getServerErrorCodeFromResponse(b);"9981"!==c&&"9982"!==c&&(a.serverError=c),a.captchaAdded=a.captcha.createOrResetCaptchaIfNeeded(c,a.captchaAdded,function(){a.$element.find("form").hasClass("ng-valid")&&a.doLogin()}),a.loading=!1})},a.prototype.onSubmitInvalid=function(){this.wixBiLogger.log(this.biEvents.LOGIN_SUBMIT)},a.prototype.isNewRecaptcha=function(){return this.experimentManager.isExperimentEnabled("specs.users.UseNoCaptchaFT")},a.prototype.socialClicked=function(a){this.socialLogin.reportClick("login",a)},a}();angular.module("loginAppInternal").component("login",{template:"<div ng-include=\"$ctrl.userDeviceType.isMobile() ? 'views/mobile/login.html' : 'views/desktop/login.html'\">\n               </div>",controller:Login}),angular.module("loginAppInternal").factory("locationParams",["$window",function(a){return new URI(a.location).search(!0)}]),angular.module("loginAppInternal").factory("originUrl",["$document","locationParams",function(a,b){return a[0].referrer?a[0].referrer.split("?").shift():b.originUrl||""}]);var Signup=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){this.$element=a,this.userServerApi=b,this.socialLogin=c,this.redirectHandler=d,this.errorCodeExtractor=e,this.captcha=f,this.wixBiLogger=g,this.biEvents=h,this.signedInInfo=i,this.contextManager=j,this.experimentManager=k,this.userDeviceType=l,this.loading=!1,this.captchaAdded=!1,this.isEmailFocus=!1,c.init("signup")}return a.$inject=["$element","userServerApi","socialLogin","redirectHandler","errorCodeExtractor","captcha","wixBiLogger","biEvents","signedInInfo","contextManager","experimentManager","userDeviceType"],a.prototype.onClickLogin=function(){this.wixBiLogger.log(this.biEvents.ON_SWITCH_CONTEXT,{context:"login"}),this.contextManager.setContext("login")},a.prototype.doSignup=function(){var a=this;this.loading=!0,this.wixBiLogger.log(this.biEvents.SIGNUP_SUBMIT),this.userServerApi.signup(this.email,this.password,this.captchaAdded?this.captcha.recaptchaParams():void 0).then(function(b){a.signedInInfo.setEmail(a.email),a.redirectHandler.postSignup(b.data.uaToken)})["catch"](function(b){var c=a.errorCodeExtractor.getServerErrorCodeFromResponse(b);"9981"!==c&&"9982"!==c&&(a.serverError=c),a.captchaAdded=a.captcha.createOrResetCaptchaIfNeeded(c,a.captchaAdded,function(){a.$element.find("form").hasClass("ng-valid")&&a.doSignup()}),a.loading=!1})},a.prototype.onSubmitInvalid=function(){this.wixBiLogger.log(this.biEvents.SIGNUP_SUBMIT)},a.prototype.isNewRecaptcha=function(){return this.experimentManager.isExperimentEnabled("specs.users.UseNoCaptchaFT")},a.prototype.socialClicked=function(a){this.socialLogin.reportClick("signup",a)},a}();angular.module("loginAppInternal").component("signup",{template:"<div ng-include=\"$ctrl.userDeviceType.isMobile() ? 'views/mobile/signup.html' : 'views/desktop/signup.html'\">\n               </div>",controller:Signup});var ErrorToTranslateKeyMap=function(){function a(){this.map={9960:"login.error.invalid_email_or_password","9960.social":"social_login.error.invalid_password",9967:"signup.error.email_exists",9966:"forgot_password.error_no_such_email","9966.social":"forgot_password.error_no_such_email","-15007":"password.invalid_password_format","email.required":"login.required_field","emailConfirm.required":"login.required_field","password.required":"login.required_field","passwordConfirm.required":"login.required_field","email.wixMailValidator":"login.invalid_email","email.email":"login.invalid_email","emailConfirm.wixMailValidator":"login.invalid_email","email.emailConfirm":"login.invalid_email","emailConfirm.match":"signup.emails_dont_match","passwordConfirm.match":"signup.passwords_dont_match","password.minlength":"signup.password_too_short"}}return a.prototype.filter=function(a){return this.map[a]?this.map[a]:"login.general_server_error"},a}();angular.module("loginAppInternal").filter("errorToTranslateKeyMap",["$injector",function(a){var b=a.instantiate(ErrorToTranslateKeyMap);return b.filter.bind(b)}]);var ServerErrorToFieldMap=function(){function a(){this.map={1:"password",9960:"password","9960.social":"password",9967:"email",9966:"email","9966.social":"email","-15007":"password",9981:"none",9982:"none"}}return a.prototype.filter=function(a){return this.map[a]?this.map[a]:"general"},a}();angular.module("loginAppInternal").filter("serverErrorToFieldMap",["$injector",function(a){var b=a.instantiate(ServerErrorToFieldMap);return b.filter.bind(b)}]),angular.module("loginAppInternal").directive("match",function(){return{require:"ngModel",scope:{match:"="},restrict:"A",link:function(a,b,c,d){d.$validators.match=function(b){return d.$isEmpty(b)||angular.equals(b,a.match)},a.$watch("match",function(){d.$validate()})}}});var TermsOfUse=function(){function a(a,b){this.publicDomain=a,this.$translate=b}return a.$inject=["publicDomain","$translate"],a.prototype.getTermsOfUseLinkTag=function(){return'<a href="'+this.publicDomain.resolve("/about/terms-of-use")+'" target="_blank">'+this.$translate("terms_of_use.terms_of_use")+"</a>"},a.prototype.getPrivacyPolicyLinkTag=function(){return'<a href="'+this.publicDomain.resolve("/about/privacy")+'" target="_blank">'+this.$translate("terms_of_use.privacy_policy")+"</a>"},a}();angular.module("loginAppInternal").component("termsOfUse",{controller:TermsOfUse,template:'<div class="terms-of-use" translate="{{ \'terms_of_use.text\' }}"\n                translate-values="{termsOfUse: $ctrl.getTermsOfUseLinkTag(), privacyPolicy: $ctrl.getPrivacyPolicyLinkTag()}"></div>'});var SocialLogin=function(){function a(a,b,c,d,e,f,g,h,i){this.userServerApi=a,this.$q=b,this.gapi=c,this.fb=d,this.redirectHandler=e,this.wixBiLogger=f,this.biEvents=g,this.signedInInfo=h,this.contextManager=i,this.getEmailErrorCode=9971,this.verifyAccountErrorCode=9967}return a.$inject=["userServerApi","$q","gapi","fb","redirectHandler","wixBiLogger","biEvents","signedInInfo","contextManager"],a.prototype.init=function(a){this.context=a},a.prototype.reportClick=function(a,b){this.wixBiLogger.log(this.biEvents.SOCIAL_LOGIN_CLICKED,{context:this.biEvents.getContext(a),socialNetwork:b}),("google"===b&&!this.gapi.ready()||"facebook"===b&&!this.fb.ready())&&this.wixBiLogger.log(this.biEvents.SOCIAL_LOGIN_EARLY_CLICK,{context:this.biEvents.getContext(a),socialNetwork:b})},a.prototype.getLastLoginToWixData=function(){return this.loginToWixData},a.prototype.loginToWix=function(a,b,c){var d=this;c(!0);var e=this.$q.defer();return this.userServerApi.socialLogin(a,b).then(function(a){var b=a.data?a.data.action:"";"register"===b?(d.signedInInfo.setEmail(a.data.email),d.redirectHandler.postSignup(a.data.uaToken)):d.redirectHandler.postLogin(a.data.uaToken),e.resolve(a)})["catch"](function(f){c(!1);var g=f?f.data:{};g&&g.errorCode&&g.errorCode===d.verifyAccountErrorCode?(d.loginToWixData={params:a,provider:b,email:g.errorDescription},d.wixBiLogger.log(d.biEvents.ON_SWITCH_CONTEXT,{context:"account-verify",socialNetwork:b}),d.contextManager.setContext("account-verification"),e.resolve(f)):g&&g.errorCode&&g.errorCode===d.getEmailErrorCode?(d.loginToWixData={params:a,provider:b},d.wixBiLogger.log(d.biEvents.ON_SWITCH_CONTEXT,{context:"get-email",socialNetwork:b}),d.contextManager.setContext("enter-email"),e.resolve(f)):e.reject(f)}),e.promise},a.prototype.continueLogin=function(a,b){var c=this.getLastLoginToWixData(),d=c.params,e=c.provider,f=angular.extend({},d,a);return this.loginToWix(f,e,b)},a}();angular.module("loginAppInternal").service("socialLogin",SocialLogin);var RedirectHandler=function(){function a(a,b,c,d,e,f,g,h){this.locationParams=a,this.$window=b,this.publicDomain=c,this.$timeout=d,this.dataLayer=e,this.userDeviceType=f,this.signedInInfo=g,this.contextManager=h}return a.$inject=["locationParams","$window","publicDomain","$timeout","dataLayer","userDeviceType","signedInInfo","contextManager"],a.prototype.postLogin=function(a){var b=this.locationParams.postLogin||this.locationParams.redirectTo||"/my-account";this.gotoLocation(b,a)},a.prototype.postSignup=function(a){var b=this;this.dataLayer.push({event:"Successful Signup"}),this.$timeout(function(){if(b.userDeviceType.isMobile()&&!b.locationParams.postSignUp)b.contextManager.setContext("thank-you");else{var c=b.locationParams.postSignUp||b.locationParams.redirectTo||"/new/account";b.gotoLocation(c,a)}},1e3)},a.prototype.gotoLocation=function(a,b){var c=this.addUaToken(this.publicDomain.resolve(a),b);c+=a===this.locationParams.originUrl?this.$window.location.hash:"",this.$window.location=c},a.prototype.addUaToken=function(a,b){return new URI(a).addQuery("uaToken",b).toString()},a}();angular.module("loginAppInternal").value("dataLayer",window.dataLayer).service("redirectHandler",RedirectHandler);var AccountVerification=function(){function a(a,b,c,d,e,f){this.socialLogin=a,this.errorCodeExtractor=b,this.wixBiLogger=c,this.biEvents=d,this.contextManager=e,this.userDeviceType=f,this.loading=!1}return a.$inject=["socialLogin","errorCodeExtractor","wixBiLogger","biEvents","contextManager","userDeviceType"],a.prototype.getEmail=function(){var a=this.socialLogin.getLastLoginToWixData();return a?a.email:""},a.prototype.onClickForgotPassword=function(){this.wixBiLogger.log(this.biEvents.ON_SWITCH_CONTEXT,{context:"forgot-password"}),this.contextManager.setContext("forgot-password")},a.prototype.verifyAccount=function(){var a=this;this.loading=!0,this.wixBiLogger.log(this.biEvents.VERIFY_ACCOUNT_SUBMIT,{socialNetwork:this.socialLogin.getLastLoginToWixData().provider}),this.socialLogin.continueLogin({password:this.password},function(b){return a.loading=b})["catch"](function(b){return a.serverError=a.errorCodeExtractor.getServerErrorCodeFromResponse(b,!0)})},a.prototype.onSubmitInvalid=function(){this.wixBiLogger.log(this.biEvents.VERIFY_ACCOUNT_SUBMIT,{socialNetwork:this.socialLogin.getLastLoginToWixData().provider})},a}();angular.module("loginAppInternal").component("accountVerification",{template:"<div ng-include=\"$ctrl.userDeviceType.isMobile() ? 'views/mobile/account-verification.html' : 'views/desktop/account-verification.html'\">\n               </div>",controller:AccountVerification}),angular.module("loginAppInternal").factory("fullStoryReady",["$q","$window","$rootScope",function(a,b,c){var d=a.defer();return b.FS&&b.FS.getCurrentSessionURL?d.resolve(b.FS.getCurrentSessionURL()):b._fs_ready=function(){c.$apply(function(){return d.resolve(b.FS.getCurrentSessionURL())})},d.promise}]),angular.module("loginAppInternal").factory("gapi",["$q","$window",function(a,b){var c=!1;return{when:function(){if(b.gapi)return c=!0,a.when(b.gapi);var d=a.defer();return b.onLoadGoogleCallback=function(){c=!0,d.resolve(b.gapi)},d.promise},ready:function(){return c}}}]),angular.module("loginAppInternal").factory("fb",["$q","$window",function(a,b){var c=!1;return{when:function(){if(b.FB)return c=!0,a.when(b.FB);var d=a.defer();return b.fbAsyncInit=function(){c=!0,d.resolve(b.FB)},d.promise},ready:function(){return c}}}]);var EnterEmail=function(){function a(a,b,c,d,e){this.socialLogin=a,this.errorCodeExtractor=b,this.wixBiLogger=c,this.biEvents=d,this.userDeviceType=e,this.loading=!1}return a.$inject=["socialLogin","errorCodeExtractor","wixBiLogger","biEvents","userDeviceType"],a.prototype.sendEmailAddress=function(){var a=this;this.loading=!0,this.wixBiLogger.log(this.biEvents.GET_EMAIL_SUBMIT,{socialNetwork:this.socialLogin.getLastLoginToWixData().provider}),this.socialLogin.continueLogin({email:this.email},function(b){return a.loading=b})["catch"](function(b){return a.serverError=a.errorCodeExtractor.getServerErrorCodeFromResponse(b,!0)})},a.prototype.onSubmitInvalid=function(){this.wixBiLogger.log(this.biEvents.GET_EMAIL_SUBMIT,{socialNetwork:this.socialLogin.getLastLoginToWixData().provider})},a}();angular.module("loginAppInternal").component("enterEmail",{template:"<div ng-include=\"$ctrl.userDeviceType.isMobile() ? 'views/mobile/enter-email.html' : 'views/desktop/enter-email.html'\">\n               </div>",controller:EnterEmail});var LoginDialog=function(){function a(a,b,c,d,e,f,g,h,i,j){this.userDeviceType=a,this.locationParams=c,this.publicDomain=d,this.wixBiLogger=e,this.biEvents=f,this.contextManager=h,this.fullStoryReady=i,"login"===c.loginDialogContext||"signup"===c.loginDialogContext?h.setContext(c.loginDialogContext):b.get("_wixUIDX")&&"null-user-id"!==b.get("_wixUIDX")?h.setContext("login"):this.shouldShowX()?h.setContext("signup"):h.setContext("login"),e.log(f.ON_START,{ver:f.getContext(this.contextManager.getContext()),origin:g}),i.then(function(a){a&&e.log(f.FULL_STORY_READY,{fullStoryUrl:a})})}return a.$inject=["userDeviceType","$cookies","locationParams","publicDomain","wixBiLogger","biEvents","originUrl","contextManager","fullStoryReady","experimentManager"],a.prototype.getContext=function(){return this.contextManager.getContext()},a.prototype.isMobile=function(){return this.userDeviceType.isMobile()},a.prototype.isTabletExperiment=function(){return this.userDeviceType.isTabletExperiment()},a.prototype.getOriginUrl=function(){return this.locationParams.originUrl?this.publicDomain.resolve(this.locationParams.originUrl):""},a.prototype.shouldShowX=function(){var a=this.locationParams.originUrl;return a&&a!==this.locationParams.postLogin&&a!==this.locationParams.postSignUp&&a!==this.locationParams.redirectTo},a}();angular.module("loginAppInternal").component("loginDialog",{templateUrl:"views/login-dialog.html",controller:LoginDialog});var ForgotPassword=function(){function a(a,b,c,d,e,f){this.userServerApi=a,this.errorCodeExtractor=b,this.wixBiLogger=c,this.biEvents=d,this.contextManager=e,this.userDeviceType=f,this.loading=!1}return a.$inject=["userServerApi","errorCodeExtractor","wixBiLogger","biEvents","contextManager","userDeviceType"],a.prototype.onClickSend=function(){var a=this;this.loading=!0,this.wixBiLogger.log(this.biEvents.FORGOT_PASSWORD_SUBMIT),this.userServerApi.forgotPassword(this.email).then(function(){a.wixBiLogger.log(a.biEvents.ON_SWITCH_CONTEXT,{context:"email-sent"}),a.contextManager.setContext("forgot-password-confirmation")})["catch"](function(b){a.serverError=a.errorCodeExtractor.getServerErrorCodeFromResponse(b)})["finally"](function(){return a.loading=!1})},a.prototype.onSubmitInvalid=function(){this.wixBiLogger.log(this.biEvents.FORGOT_PASSWORD_SUBMIT)},a.prototype.onClickBack=function(){this.wixBiLogger.log(this.biEvents.ON_SWITCH_CONTEXT,{context:this.biEvents.getContext(this.contextManager.getPreviousContext())}),this.contextManager.setContext(this.contextManager.getPreviousContext())},a}();angular.module("loginAppInternal").component("forgotPassword",{template:"<div ng-include=\"$ctrl.userDeviceType.isMobile() ? 'views/mobile/forgot-password.html' : 'views/desktop/forgot-password.html'\">\n               </div>",controller:ForgotPassword});var ForgotPasswordConfirmation=function(){function a(a){this.contextManager=a}return a.$inject=["contextManager"],a.prototype.onClickDone=function(){this.contextManager.setContext("login")},a}();angular.module("loginAppInternal").component("forgotPasswordConfirmation",{templateUrl:"views/forgot-password-confirmation.html",controller:ForgotPasswordConfirmation});var DesktopInput=function(){function a(a,b,c,d,e,f,g){var h=this;this.$scope=a,this.$element=b,this.errorCodeExtractor=d,this.contextManager=f,this.$filter=g,c(function(){var c=b.find("input");if(b.find("ng-transclude").replaceWith(c),c.bind("change",function(){h.clearServerError(),a.$digest()}),"password"===c.attr("type")&&-1!==navigator.userAgent.indexOf("Chrome"))var d=e(function(){c.is(":-webkit-autofill")&&(c.parent().addClass("md-input-has-value"),e.cancel(d))},50,200)},0)}return a.$inject=["$scope","$element","$timeout","errorCodeExtractor","$interval","contextManager","$filter"],a.prototype.getTooltipWidth=function(){var a,b=this.$filter("translate")(this.$filter("errorToTranslateKeyMap")(this.getError()));return a=b.length>50?215:b.length>30?192:b.length>20?156:135},a.prototype.clearServerError=function(){this.serverError=void 0},a.prototype.getError=function(){return this.errorCodeExtractor.getModelErrorCode(this.field,this.serverError,this.showErrorOnGeneralError)},a.prototype.isTooltipLeft=function(){return"signup"===this.contextManager.getContext()||"login"===this.contextManager.getContext()},a}();angular.module("loginAppInternal").component("desktopInput",{template:'<md-input-container ng-class="{\'has-error\': !!$ctrl.getError()}">\n                <label class="label"> {{$ctrl.label | translate}} </label>\n                <ng-transclude></ng-transclude>\n                <div class="focus-line"></div>\n                <tooltip class="left" error="$ctrl.getError()" width="$ctrl.getTooltipWidth()" ng-style="{\'left\': -45 - $ctrl.getTooltipWidth() + \'px\'}" ng-if="$ctrl.isTooltipLeft()"></tooltip>\n                <i class="login-svg-font-icons-error error">\n                  <tooltip class="right" error="$ctrl.getError()" ng-if="!$ctrl.isTooltipLeft()"></tooltip>\n                </i>\n              </md-input-container>',controller:DesktopInput,transclude:!0,bindings:{field:"=",label:"=",serverError:"=",showErrorOnGeneralError:"="}});var MobileInput=function(){function a(a,b,c,d,e){var f=this;this.$scope=a,this.$element=b,this.errorCodeExtractor=d,this.mdInputContainer=b.find("md-input-container"),c(function(){var c=b.find("input");if(b.find("ng-transclude").replaceWith(c),c.bind("change",function(){f.clearServerError(),a.$digest()}),"password"===c.attr("type")&&-1!==navigator.userAgent.indexOf("Chrome"))var d=e(function(){c.is(":-webkit-autofill")&&(c.parent().addClass("md-input-has-value"),e.cancel(d))},50,200)},0)}return a.$inject=["$scope","$element","$timeout","errorCodeExtractor","$interval"],a.prototype.clearServerError=function(){this.serverError=void 0},a.prototype.getError=function(){return this.errorCodeExtractor.getModelErrorCode(this.field,this.serverError,this.showErrorOnGeneralError)},a}();angular.module("loginAppInternal").component("mobileInput",{template:'<md-input-container ng-class="{\'has-error\': $ctrl.getError()}">\n                <ng-transclude></ng-transclude>\n                <label class="label">\n                  <div class="placeholder-label"> {{ $ctrl.label | translate}} </div>\n                  <div class="error-label"> {{$ctrl.getError() | errorToTranslateKeyMap | translate}} </div>\n                </label>\n                <i class="login-svg-font-icons-error error"></i>\n              </md-input-container>',controller:MobileInput,transclude:!0,bindings:{field:"=",label:"=",serverError:"=",showErrorOnGeneralError:"="}});var ErrorCodeExtractor=function(){function a(a){this.$filter=a}return a.$inject=["$filter"],a.prototype.getServerErrorCodeFromResponse=function(a,b){return a&&a.data&&a.data.errorCode?a.data.errorCode+(b?".social":""):"general_error"},a.prototype.getModelErrorCode=function(a,b,c){var d=void 0;if(a){var e=Object.keys(a.$error).filter(function(b){return!!a.$error[b]});if(a.$invalid&&e.length>0)d=a.$name+"."+e[0];else if(b){var f=this.$filter("serverErrorToFieldMap")(b);(f===a.$name||"general"===f&&c)&&(d=b)}}return d},a}();angular.module("loginAppInternal").service("errorCodeExtractor",ErrorCodeExtractor);var Recaptcha1=function(){function a(a,b){this.authKeys=b,this.recaptcha=a.Recaptcha}return a.$inject=["$window","authKeys"],a.prototype.getChallenge=function(){return this.recaptcha.get_challenge()},a.prototype.getResponse=function(){return this.recaptcha.get_response()},a.prototype.create=function(){this.recaptcha.create(this.authKeys.getKey(this.authKeys.RECAPTCHA_V1_SITE_KEY),"recaptcha-widget",{theme:"clean"})},a.prototype.reload=function(){this.recaptcha.reload()},a.prototype.createOrResetCaptchaIfNeeded=function(a,b){return b?(this.reload(),!0):"9981"===a||"9982"===a?(this.create(),!0):!1},a.prototype.recaptchaParams=function(){return{recaptcha_challenge_field:this.getChallenge(),recaptcha_response_field:this.getResponse()}},a}();angular.module("loginAppInternal").service("recaptcha1",Recaptcha1);var Recaptcha2=function(){function a(a,b){var c=this;this.grecaptcha=a,this.authKeys=b,a.then(function(a){c.captcha=a})}return a.$inject=["grecaptcha","authKeys"],a.prototype.getResponse=function(){return this.captcha?this.captcha.getResponse():!1},a.prototype.create=function(a){var b=this;this.grecaptcha.then(function(c){c.render("recaptcha-widget",{sitekey:b.authKeys.getKey(b.authKeys.RECAPTCHA_V2_SITE_KEY),callback:a,theme:"light"})})},a.prototype.reload=function(){this.grecaptcha.then(function(a){a.reset()})},a.prototype.createOrResetCaptchaIfNeeded=function(a,b,c){return b?(this.reload(),!0):"9981"===a||"9982"===a?(this.create(c),!0):!1},a.prototype.recaptchaParams=function(){return{recaptcha_response_field:this.getResponse()}},a}();angular.module("loginAppInternal").service("recaptcha2",Recaptcha2).factory("grecaptcha",["$q","$window",function(a,b){if(b.grecaptcha)return a.when(b.grecaptcha);var c=a.defer();return b.onLoadRecaptchaCallback=function(){c.resolve(b.grecaptcha)},c.promise}]),angular.module("loginAppInternal").factory("captcha",["experimentManager","recaptcha1","recaptcha2",function(a,b,c){return a.isExperimentEnabled("specs.users.UseNoCaptchaFT")?c:b}]);var Autofocus=function(){function a(a,b){this.$element=a,b(function(){a[0].focus()})}return a.$inject=["$element","$timeout"],a}();angular.module("loginAppInternal").directive("autofocus",function(){return{controller:Autofocus,controllerAs:"autofocus",restrict:"A"}});var UserDeviceType=function(){function a(a,b,c,d){this.provider=a,this.locationParams=b,this.$window=c,this.experimentManager=d}return a.$inject=["provider","locationParams","$window","experimentManager"],a.prototype.isMobile=function(){return"Smartphone"===this.provider.deviceType||"mobile"===this.locationParams.mode||this.experimentManager.isExperimentEnabled("specs.users.TabletToMobileView")&&("Tablet"===this.provider.deviceType||this.$window.innerWidth<810)},a.prototype.isTabletExperiment=function(){return this.experimentManager.isExperimentEnabled("specs.users.TabletToMobileView")},a}(),UserDeviceTypeProvider=function(){function a(){}return a.prototype.setDeviceType=function(a){this.deviceType=a},a.prototype.$get=function(a){return a.instantiate(UserDeviceType,{provider:this})},a.prototype.$get.$inject=["$injector"],a}();angular.module("loginAppInternal").provider("userDeviceType",UserDeviceTypeProvider);var PublicDomain=function(){function a(a,b){this.provider=a,this.$location=b}return a.$inject=["provider","$location"],a.prototype.resolve=function(a){if(0===a.indexOf("/")){var b=this.$location.host().match(/local/);return b?""+this.$location.absUrl().split("?")[0].slice(0,-1)+a:"https://"+("en"===this.provider.locale?"www":this.provider.locale)+"."+this.provider.baseDomain+a}return a},a}(),PublicDomainProvider=function(){function a(){}return a.prototype.setBaseDomain=function(a){this.baseDomain=a},a.prototype.setLocale=function(a){this.locale=a},a.prototype.$get=function(a){return a.instantiate(PublicDomain,{provider:this})},a.prototype.$get.$inject=["$injector"],a}();angular.module("loginAppInternal").provider("publicDomain",PublicDomainProvider);var SessionId=function(){function a(){this.sessionId=""}return a.prototype.get=function(){return this.sessionId||(this.sessionId=this.getNewGuid()),this.sessionId},a.prototype.getNewGuid=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},a}();angular.module("loginAppInternal").service("sessionId",SessionId);var BiEvents=function(){function a(){this.evMap={},this.defineBIEvent("ON_START",300),this.defineBIEvent("ON_SWITCH_CONTEXT",101),this.defineBIEvent("LOGIN_SUBMIT",110),this.defineBIEvent("SIGNUP_SUBMIT",120),this.defineBIEvent("FORGOT_PASSWORD_SUBMIT",131),this.defineBIEvent("SOCIAL_LOGIN_CLICKED",140),this.defineBIEvent("SOCIAL_AUTH_ERROR",141),this.defineBIEvent("SOCIAL_AUTH_SUCCESS",142),this.defineBIEvent("DIALOG_CLOSED",303),this.defineBIEvent("VERIFY_ACCOUNT_SUBMIT",143),this.defineBIEvent("GET_EMAIL_SUBMIT",149),this.defineBIEvent("FULL_STORY_READY",400),this.defineBIEvent("SOCIAL_LOGIN_EARLY_CLICK",139)}return a.prototype.defineBIEvent=function(a,b){this[a]=a,this.evMap[a]={evid:b}},a.prototype.getEventMap=function(){return this.evMap},a.prototype.getContext=function(a){switch(a){case"login":return"login";case"signup":return"sign-up";case"forgot-password":return"forgot-password";case"account-verification":return"account-verify";case"enter-email":return"get-email";case"forgot-password-confirmation":return"email-sent"}},a}();angular.module("loginAppConstants").constant("biEvents",new BiEvents);var UserServerApi=function(){function a(a,b,c,d,e,f,g,h,i){this.$http=a,this.sessionId=b,this.userDeviceType=c,this.originUrl=d,this.experimentManager=e,this.$q=f,this.$timeout=g,this.locationParams=h,this.$locale=i}return a.$inject=["$http","sessionId","userDeviceType","originUrl","experimentManager","$q","$timeout","locationParams","$locale"],a.prototype.extendParams=function(a){for(var b in a)void 0===a[b]&&delete a[b];return angular.extend(a,{ldSessionID:this.sessionId.get(),originView:this.userDeviceType.isMobile()?"mobile":"desktop",urlThatUserRedirectedFrom:this.originUrl,overrideLocale:this.$locale.id,language:this.$locale.id})},a.prototype.extendRecaptchaParams=function(a,b){return this.experimentManager.isExperimentEnabled("specs.users.UseNoCaptchaFT")||angular.extend(a,{"recaptchaParams.recaptcha_challenge_field":b.recaptcha_challenge_field}),angular.extend(a,{"recaptchaParams.recaptcha_response_field":b.recaptcha_response_field}),a},a.prototype.createPromiseWithDelay=function(a){var b=this,c=a.then(function(a){return{success:!0,data:a}})["catch"](function(a){return{success:!1,data:a}});return this.$q.all([c,this.$timeout(500)]).then(function(a){var c=a[0],d=c.success,e=c.data;return d?e:b.$q.reject(e)})},a.prototype.addColorIfNeeded=function(a){var b=this.locationParams.color||this.locationParams.userColor;b&&angular.extend(a,{color:b})},a.prototype.addUserTokenIfNeeded=function(a){var b=this.locationParams.userToken;b&&angular.extend(a,{userToken:b})},a.prototype.signup=function(a,b,c){var d={email:a,password:b};return c&&this.extendRecaptchaParams(d,c),this.addColorIfNeeded(d),this.addUserTokenIfNeeded(d),this.extendParams(d),this.createPromiseWithDelay(this.$http.post("/_api/wix-html-login-webapp/auth/register",d,{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}}))},a.prototype.login=function(a,b,c,d){var e={email:a,password:b,rememberMe:c};return d&&this.extendRecaptchaParams(e,d),this.addColorIfNeeded(e),this.addUserTokenIfNeeded(e),this.extendParams(e),this.createPromiseWithDelay(this.$http.post("/_api/wix-html-login-webapp/auth/login",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}}))},a.prototype.forgotPassword=function(a){var b=this.extendParams({email:a});return this.createPromiseWithDelay(this.$http.post("/_api/wix-html-login-webapp/auth/forgotPassword",b,{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}}))},a.prototype.socialLogin=function(a,b){return this.addColorIfNeeded(a),this.addUserTokenIfNeeded(a),this.extendParams(a),this.createPromiseWithDelay(this.$http.post("/_api/wix-html-login-webapp/social/login/"+b,a,{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}}))},a}();angular.module("loginAppInternal").service("userServerApi",UserServerApi),angular.module("loginAppInternal").directive("defaultEmail",["locationParams",function(a){return{controllerAs:"defaultEmail",require:"ngModel",bindToController:!0,restrict:"A",link:function(b,c){a.defaultEmail&&(c.val(a.defaultEmail),c.triggerHandler("input"))}}}]);var ThankYou=function(){function a(a){this.signedInInfo=a}return a.$inject=["signedInInfo"],a.prototype.getUserEmail=function(){return this.signedInInfo.getEmail()},a}();angular.module("loginAppInternal").component("thankYou",{templateUrl:"views/mobile/thank-you.html",controller:ThankYou});var SignedInInfo=function(){function a(){}return a.prototype.getEmail=function(){return this.email},a.prototype.setEmail=function(a){this.email=a},a}();angular.module("loginAppInternal").service("signedInInfo",SignedInInfo);var AuthKeys=function(){function a(a){this.provider=a,this.FACEBOOK_CLIENT_ID="facebookClientId",this.GOOGLE_CLIENT_ID="googleClientId",this.RECAPTCHA_V1_SITE_KEY="recaptchaV1SiteKey",this.RECAPTCHA_V2_SITE_KEY="recaptchaV2SiteKey"}return a.$inject=["provider"],a.prototype.getKey=function(a){return this.provider.keys[a]},a}(),AuthKeysProvider=function(){function a(){}return a.prototype.setKeys=function(a){this.keys=a},a.prototype.$get=function(a){return a.instantiate(AuthKeys,{provider:this})},a.prototype.$get.$inject=["$injector"],a}();angular.module("loginAppInternal").provider("authKeys",AuthKeysProvider),angular.module("loginAppInternal").component("spinner",{template:'<svg class="spinner" width="29" height="29" viewBox="0 0 66 66"">\n                 <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>\n              </svg>'});var SocialSignin=function(){function a(a,b,c){this.socialLogin=a,this.contextManager=b,this.userDeviceType=c,this.googleLoading=!1,this.fbLoading=!1,this.context=this.contextManager.getContext()}return a.$inject=["socialLogin","contextManager","userDeviceType"],a.prototype.socialClicked=function(a){this.socialLogin.reportClick(this.context,a)},a}();angular.module("loginAppInternal").component("socialSignin",{template:"<div ng-include=\"$ctrl.userDeviceType.isMobile() ? 'views/mobile/social-signin.html' : 'views/desktop/social-signin.html'\">\n               </div>",controller:SocialSignin}),angular.module("loginAppInternal").component("tooltip",{template:'<div class="tooltip-container">\n                  <div class="tooltip-arrow"></div>\n                  <div class="tooltip-content">\n                    <div class="tooltip-text" ng-style="{\'width\': $ctrl.width > 0 && $ctrl.width}">\n                        {{$ctrl.error | errorToTranslateKeyMap | translate}}\n                    </div>\n                  </div>\n               </div>',bindings:{error:"=",width:"="}});var GoogleLogin=function(){function a(a,b,c,d,e,f,g,h,i){var j=this;this.$scope=a,this.$element=b,this.gapi=c,this.authKeys=d,this.wixBiLogger=e,this.biEvents=f,this.socialLogin=g,this.errorCodeExtractor=i,this.context=h.getContext();var k=function(a){return j.googleSocialLoginHandler(a,function(a){return j.googleLoading=a})};g.currentGoogleCallback=k,this.renderGoogleElement(k)}return a.$inject=["$scope","$element","gapi","authKeys","wixBiLogger","biEvents","socialLogin","contextManager","errorCodeExtractor"],a.prototype.renderGoogleElement=function(a){
var b=this,c=this.$element[0];this.gapi.when().then(function(d){d.signin.render(c,{callback:function(c){return b.socialLogin.currentGoogleCallback===a&&a(c)},clientid:b.authKeys.getKey(b.authKeys.GOOGLE_CLIENT_ID),accesstype:"offline",cookiepolicy:"single_host_origin",scope:"profile email"})})},a.prototype.googleSocialLoginHandler=function(a,b){var c=this,d=a.code,e=a.id_token;a["g-oauth-window"]&&(d&&e?(this.wixBiLogger.log(this.biEvents.SOCIAL_AUTH_SUCCESS,{socialNetwork:"google",context:this.biEvents.getContext(this.context),interactive:"consent"===a["g-oauth-window"]}),this.socialLogin.loginToWix({code:d,id_token:e},"google",b)["catch"](function(a){c.serverError=c.errorCodeExtractor.getServerErrorCodeFromResponse(a)})):this.wixBiLogger.log(this.biEvents.SOCIAL_AUTH_ERROR,{socialNetwork:"google",reason:a.error||"Unknown error"}))},a}();angular.module("loginAppInternal").directive("googleLogin",function(){return{controller:GoogleLogin,controllerAs:"googleLogin",scope:{onError:"=",googleLoading:"="},bindToController:!0,restrict:"A"}});var FacebookLogin=function(){function a(a,b,c,d,e,f,g,h,i){var j=this;this.$scope=a,this.$element=b,this.fb=c,this.authKeys=d,this.wixBiLogger=e,this.biEvents=f,this.socialLogin=g,this.errorCodeExtractor=i,this.context=h.getContext(),this.initFacebook(function(a){return j.fbLoading=a})}return a.$inject=["$scope","$element","fb","authKeys","wixBiLogger","biEvents","socialLogin","contextManager","errorCodeExtractor"],a.prototype.initFacebook=function(a){var b=this;this.fb.when().then(function(c){c.init({appId:b.authKeys.getKey(b.authKeys.FACEBOOK_CLIENT_ID),version:"v2.3",channelUrl:"//www.wix.com/channel.html",status:!0,cookie:!0,xfbml:!1}),c.getLoginStatus(function(a){b.fbWasAlreadyConnected="connected"===a.status});var d=b.$element[0];$(d).bind("click",function(){return b.onClickFacebook(c,a)})})},a.prototype.onClickFacebook=function(a,b){var c=this;a.login(function(d){d.authResponse?a.api("/me",function(a){var e=d.authResponse.accessToken,f=a.email,g=a.id;g&&(c.wixBiLogger.log(c.biEvents.SOCIAL_AUTH_SUCCESS,{socialNetwork:"facebook",context:c.biEvents.getContext(c.context),interactive:!c.fbWasAlreadyConnected}),c.socialLogin.loginToWix({access_token:e,fb_email:f,user_id:g},"facebook",b)["catch"](function(a){c.serverError=c.errorCodeExtractor.getServerErrorCodeFromResponse(a)}))}):c.wixBiLogger.log(c.biEvents.SOCIAL_AUTH_ERROR,{socialNetwork:"facebook",reason:d.status})},{scope:"email"})},a}();angular.module("loginAppInternal").directive("facebookLogin",function(){return{controller:FacebookLogin,controllerAs:"facebookLogin",scope:{onError:"=",fbLoading:"="},bindToController:!0,restrict:"A"}});